<!DOCTYPE html>
<html dir="ltr" lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=5.0" />
    <title>Le-Kit Component Library</title>

    <script type="module" src="/build/le-kit.esm.js"></script>
    <script nomodule src="/build/le-kit.js"></script>
    <link rel="stylesheet" href="/build/le-kit.css" />
    
    <style>
      body {
        font-family: var(--le-font-family);
        padding: var(--le-space-lg);
        background: var(--le-color-background);
        color: var(--le-color-text);
        margin: 0;
        transition: background 0.3s ease, color 0.3s ease;
      }
      .demo-section {
        margin-bottom: var(--le-space-2xl);
      }
      h1, h2 {
        color: var(--le-color-text);
      }
      p {
        color: var(--le-color-text-secondary);
      }
      .controls {
        margin-bottom: var(--le-space-lg);
        padding: var(--le-space-md);
        background: var(--le-color-surface);
        border-radius: var(--le-radius-lg);
        display: flex;
        flex-wrap: wrap;
        gap: var(--le-space-lg);
        align-items: center;
        box-shadow: var(--le-shadow-sm);
      }
      .control-group {
        display: flex;
        gap: var(--le-space-sm);
        align-items: center;
      }
      .control-group span {
        font-weight: var(--le-font-weight-medium);
        color: var(--le-color-text-secondary);
        font-size: var(--le-font-size-sm);
      }
      .controls button {
        padding: var(--le-space-sm) var(--le-space-md);
        border: 1px solid var(--le-color-border);
        border-radius: var(--le-radius-md);
        background: var(--le-color-surface);
        color: var(--le-color-text);
        cursor: pointer;
        font-size: var(--le-font-size-sm);
        transition: all var(--le-transition-fast);
      }
      .controls button:hover {
        border-color: var(--le-color-primary);
      }
      .controls button.active {
        background: var(--le-color-primary);
        color: var(--le-color-on-primary);
        border-color: var(--le-color-primary);
      }
      .controls button.danger {
        border-color: #e53935;
        color: #e53935;
      }
      .controls button.danger:hover {
        background: #e53935;
        color: white;
      }
      .demo-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
        gap: var(--le-space-lg);
      }
      .text-slot-demo {
        padding: var(--le-space-md);
        background: var(--le-color-surface);
        border-radius: var(--le-radius-md);
        box-shadow: var(--le-shadow-sm);
      }
      .text-slot-demo label {
        display: block;
        margin-bottom: var(--le-space-sm);
        font-weight: var(--le-font-weight-medium);
        color: var(--le-color-text-secondary);
        font-size: var(--le-font-size-sm);
      }
    </style>
  </head>
  <body>
    <h1>Le-Kit Component Library</h1>
    
    <div class="controls" mode="default">
      <div class="control-group">
        <span>Mode:</span>
        <le-button id="btn-mode-default" variant="outlined" selected="true" color="primary" onclick="setMode('default', event)">Default</le-button>
        <le-button id="btn-mode-admin" variant="outlined" color="primary" onclick="setMode('admin', event)">Admin</le-button>
      </div>
      
      <div class="control-group">
        <span>Theme:</span>
        <le-button id="btn-theme-default" variant="outlined" selected color="secondary" onclick="setTheme('default')">Default</le-button>
        <le-button id="btn-theme-dark" variant="outlined" color="secondary" onclick="setTheme('dark')">Dark</le-button>
        <le-button id="btn-theme-gradient" variant="outlined" color="secondary" onclick="setTheme('gradient')">Gradient</le-button>
        <le-button id="btn-theme-minimal" variant="outlined" color="secondary" onclick="setTheme('minimal')">Minimal</le-button>
        <le-button id="btn-theme-warm" variant="outlined" color="secondary" onclick="setTheme('warm')">Warm</le-button>
      </div>

      <div class="control-group">
        <le-button variant="outlined" color="danger" onclick="resetContent()">Reset to Default</le-button>
      </div>
    </div>

    <!-- Editable content container - contents stored in localStorage -->
    <div id="editable-content"></div>

    <!-- Default content template (used when localStorage is empty) -->
    <template id="default-content">
      <div class="demo-section">
        <h2>Form Components</h2>
        <p>Input controls for forms with admin mode support.</p>
        <div class="demo-grid">
          <div class="text-slot-demo">
            <label>Checkbox:</label>
            <le-stack direction="horizontal" gap="var(--le-space-md)">
              <le-checkbox name="terms" value="male" external-id="terms-v1" onchange="console.log('Checkbox changed to', event.detail.checked)">M</le-checkbox>
              <le-checkbox name="terms" value="female" external-id="terms-v2" onchange="console.log('Checkbox changed to', event.detail.checked)">F</le-checkbox>
            </le-stack>
          </div>
          
          <div class="text-slot-demo">
            <label>Disabled Checkbox:</label>
            <le-checkbox name="newsletter" value="subscribe" disabled checked>
              Subscribe to newsletter
              <span slot="description">You are already subscribed.</span>
            </le-checkbox>
          </div>
          
          <div class="text-slot-demo">
            <label>String Input:</label>
            <le-string-input name="dog-name" placeholder="Jeffa" external-id="dog-name-field" label="Dog's Name" icon-start="üê∂">
              <span slot="description">Enter your unique username.</span>
            </le-string-input>
          </div>

          <div class="text-slot-demo">
            <label>Text Input:</label>
            <le-string-input
              name="text-input"
              label="Empty text input"
              icon-end="‚úèÔ∏è"
            ></le-string-input>
          </div>

          <div class="text-slot-demo">
            <label>Number Input:</label>
            <le-number-input name="quantity" min="0" max="100" value="1" external-id="qty-field" label="Quantity" icon-start="#">
              <span slot="description">Enter amount (0-100)</span>
            </le-number-input>
          </div>

          <div class="text-slot-demo">
            <label>Price Input (Step 0.01):</label>
            <le-number-input name="price" step="0.01" min="0" value="19.99" external-id="price-field" label="Price" icon-start="$"
              show-spinners="false"
            >
              <span slot="description">Use Shift+Up for +0.1, Alt+Up for +0.001</span>
            </le-number-input>
          </div>
        </div>
      </div>

      <div class="demo-section">
        <h2>Legacy Components</h2>
        <p>Component from the ancient version of LeKit, 7 years ago</p>
        <div class="demo-grid">
          <div class="text-slot-demo">
            <label>The Round Progress:</label>
            <le-round-progress
              value="66"
              padding="20"
              style="
                display: block;
                width: 150px;
                height: 150px;
                --progress-width: 15px;
                --progress-color: var(--le-color-primary);
                --progress-shadow: var(--le-shadow-md);
              "
            ></le-round-progress>
          </div>
          <div class="text-slot-demo">
            <label>The Turntable:</label>
            <le-turntable
              value="-35"
              center="33% 33%"
              style="
                width: 150px;
                height: 150px;
                box-shadow: var(--le-shadow-md);
              "
            >
              <div style="
                display: flex;
                height: 100%;
                width: 100%;
                align-items: center;
                justify-content: center;
              ">
                <div>Hello, Le-Kit!</div>
              </div>
            </le-turntable>
          </div>
        </div>
      </div>

      <div class="demo-section">
        <h2>Popup / Dialog Component</h2>
        <p>Modal and non-modal popups using native &lt;dialog&gt;. Supports alerts, confirms, prompts, and fully custom content.</p>
        <div class="demo-grid">
          <div class="text-slot-demo">
            <label>Programmatic API:</label>
            <div style="display: flex; flex-direction: row; flex-wrap: wrap; gap: 8px;">
              <le-button onclick="leAlert('Some text in the alert to test it')">leAlert()</le-button>
              <le-button onclick="showConfirm()">leConfirm()</le-button>
              <le-button onclick="showPrompt()">lePrompt()</le-button>
            </div>
            <p id="popup-result" style="margin-top: 8px; font-size: 13px; color: var(--le-color-text-secondary);"></p>
          </div>
          
          <div class="text-slot-demo">
            <label>Custom content (children):</label>
            <le-button onclick="showCustomPopup()">Show Custom Popup</le-button>
            
            <!-- Declarative popup with custom content -->
            <le-popup id="custom-popup" popup-title="Custom Content" type="custom" modal="false">
              <div style="text-align: center;">
                <div style="font-size: 48px; margin-bottom: 16px;">üéâ</div>
                <h3 style="margin: 0 0 8px 0;">Congratulations!</h3>
                <p style="margin: 0; color: var(--le-color-text-secondary);">
                  You can put <strong>any HTML</strong> inside the popup!
                </p>
              </div>
              <div slot="footer" style="display: flex; gap: 8px; justify-content: center;">
                <le-button variant="outlined" onclick="document.getElementById('custom-popup').hide(false)">Maybe Later</le-button>
                <le-button color="success" onclick="document.getElementById('custom-popup').hide(true)">Awesome!</le-button>
              </div>
            </le-popup>
          </div>
          
          <div class="text-slot-demo">
            <label>Position variants:</label>
            <div style="display: flex; flex-wrap: wrap; gap: 8px; margin-top: 8px;">
              <le-button size="small" onclick="showPositioned('center')">Center</le-button>
              <le-button size="small" onclick="showPositioned('top')">Top</le-button>
              <le-button size="small" onclick="showPositioned('bottom-right')">Bottom-Right</le-button>
            </div>
          </div>
          
          <div class="text-slot-demo">
            <label>Non-modal (click outside):</label>
            <le-button onclick="showNonModal({ position: 'bottom-left' })">Show Non-Modal</le-button>
          </div>
        </div>
      </div>

      <div class="demo-section">
        <h2>Popover Component</h2>
        <p>A reusable popover for floating content, settings panels, and menus.</p>
        <div class="demo-grid">
          <div class="text-slot-demo">
            <label>Default trigger (plus icon):</label>
            <le-popover popover-title="Settings">
              <p style="margin: 0;">This is the popover content.</p>
            </le-popover>
          </div>
          
          <div class="text-slot-demo">
            <label>Custom trigger:</label>
            <le-popover popover-title="Options" position="bottom" align="center">
              <le-button slot="trigger">Click me</le-button>
              <div style="display: flex; flex-direction: column; gap: 8px;">
                <button style="padding: 8px; text-align: left; border: none; background: none; cursor: pointer;">Option 1</button>
                <button style="padding: 8px; text-align: left; border: none; background: none; cursor: pointer;">Option 2</button>
                <button style="padding: 8px; text-align: left; border: none; background: none; cursor: pointer;">Option 3</button>
              </div>
            </le-popover>
          </div>
          
          <div class="text-slot-demo" style="text-align: end;">
            <label>Auto-positioning:</label>
            <le-popover popover-title="Auto Position" position="auto">
              <span slot="trigger" style="padding: 4px 8px; background: #e3f2fd; border-radius: 4px; cursor: pointer;">Hover info ‚ÑπÔ∏è</span>
              <p style="margin: 0; font-size: 13px;">Position automatically adjusts based on available viewport space.</p>
            </le-popover>
          </div>
        </div>
      </div>

      <div class="demo-section">
        <h2>Card Component (switch to Admin mode to see settings)</h2>
        <p>Cards now have built-in admin mode support. Click the ‚öôÔ∏è to edit properties.</p>
        <div class="demo-grid">
          <!-- Card with content -->
          <le-card variant="default">
            <h2 slot="header">Card Title</h2>
            <p>This is the main content of the card. It can contain any elements.</p>
            <button slot="footer">Action</button>
          </le-card>
          
          <!-- Empty card - slots visible in admin mode -->
          <le-card variant="outlined">
            <!-- Empty slots will show placeholders in admin mode -->
          </le-card>
          
          <!-- Elevated card -->
          <le-card variant="elevated" interactive>
            <h3 slot="header">Interactive Card</h3>
            <p>This card is clickable and has elevation.</p>
          </le-card>
        </div>
      </div>

      <div class="demo-section">
        <h2>Text Component (Rich Text Editor in Admin Mode)</h2>
        <p>Semantic text elements with Notion-like rich text editing. Switch to Admin mode and click on any text to edit!</p>
        
        <div class="demo-grid">
          <div class="text-slot-demo">
            <label>Headings:</label>
            <le-text variant="h1">Heading 1</le-text>
            <le-text variant="h2">Heading 2</le-text>
            <le-text variant="h3">Heading 3</le-text>
            <le-text variant="h4">Heading 4</le-text>
          </div>
          
          <div class="text-slot-demo">
            <label>Paragraph with formatting:</label>
            <le-text variant="p">This is a paragraph with <strong>bold text</strong>, <em>italic text</em>, and a <a href="https://example.com">link</a>. You can edit this in admin mode with the formatting toolbar.</le-text>
          </div>
          
          <div class="text-slot-demo">
            <label>Quote:</label>
            <le-text variant="quote">The only way to do great work is to love what you do. ‚Äî Steve Jobs</le-text>
          </div>
          
          <div class="text-slot-demo">
            <label>Code:</label>
            <le-text variant="code">const greeting = "Hello, World!";
console.log(greeting);</le-text>
          </div>
          
          <div class="text-slot-demo">
            <label>Label & Small:</label>
            <le-text variant="label">Form Label</le-text>
            <le-text variant="small">This is small helper text, useful for captions or notes.</le-text>
          </div>
          
          <div class="text-slot-demo">
            <label>Alignment:</label>
            <le-text variant="p" align="left">Left aligned text</le-text>
            <le-text variant="p" align="center">Center aligned text</le-text>
            <le-text variant="p" align="right">Right aligned text</le-text>
          </div>
        </div>
      </div>

      <div class="demo-section">
        <h2>Mixed Themes (theme attribute on individual components)</h2>
        <p>Each card below has a different theme, demonstrating per-component theming.</p>
        <div class="demo-grid">
          <le-card variant="elevated" theme="dark">
            <h3 slot="header">Dark Theme Card</h3>
            <p>This card uses theme="dark" regardless of the global theme.</p>
          </le-card>
          
          <le-card variant="elevated" theme="gradient">
            <h3 slot="header">Gradient Theme Card</h3>
            <p>This card uses theme="gradient" with purple accents.</p>
          </le-card>
          
          <le-card variant="elevated" theme="warm">
            <h3 slot="header">Warm Theme Card</h3>
            <p>This card uses theme="warm" with orange tones.</p>
          </le-card>
        </div>
      </div>

      <div class="demo-section">
        <h2>Button Component</h2>
        <p>Buttons with theme-based colors, style variants, and sizes.</p>
        
        <div class="text-slot-demo" style="margin-bottom: var(--le-space-md);">
          <label>Colors (solid):</label>
          <div style="display: flex; gap: 8px; flex-wrap: wrap; margin-top: 8px;">
            <le-button color="primary">Primary</le-button>
            <le-button color="secondary">Secondary</le-button>
            <le-button color="success">Success</le-button>
            <le-button color="warning">Warning</le-button>
            <le-button color="danger">Danger</le-button>
            <le-button color="info">Info</le-button>
          </div>
        </div>
        
        <div class="text-slot-demo" style="margin-bottom: var(--le-space-md);">
          <label>Variants:</label>
          <div style="display: flex; gap: 8px; flex-wrap: wrap; margin-top: 8px;">
            <le-button variant="solid" color="primary">Solid</le-button>
            <le-button variant="outlined" color="primary">Outlined</le-button>
            <le-button variant="clear" color="primary">Clear</le-button>
            <le-button variant="solid" color="danger">Solid</le-button>
            <le-button variant="outlined" color="danger">Outlined</le-button>
            <le-button variant="clear" color="danger">Clear</le-button>
          </div>
        </div>
        
        <div class="text-slot-demo" style="margin-bottom: var(--le-space-md);">
          <label>Sizes:</label>
          <div style="display: flex; gap: 8px; align-items: center; flex-wrap: wrap; margin-top: 8px;">
            <le-button size="small">Small</le-button>
            <le-button size="medium">Medium</le-button>
            <le-button size="large">Large</le-button>
          </div>
        </div>
        
        <div class="text-slot-demo" style="margin-bottom: var(--le-space-md);">
          <label>States:</label>
          <div style="display: flex; gap: 8px; flex-wrap: wrap; margin-top: 8px;">
            <le-button selected>Selected</le-button>
            <le-button disabled>Disabled</le-button>
            <le-button variant="outlined" selected>Outlined Selected</le-button>
          </div>
        </div>
        
        <div class="text-slot-demo">
          <label>Full width & Icons:</label>
          <div style="display: flex; flex-direction: column; gap: 8px; margin-top: 8px;">
            <le-button full-width color="primary">Full Width Button</le-button>
            <div style="display: flex; gap: 8px;">
              <le-button icon-only color="primary" size="small">
                <svg slot="icon-only" viewBox="0 0 24 24" fill="currentColor"><path d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"/></svg>
              </le-button>
              <le-button icon-only variant="clear" size="small">
                <div slot="icon-only">‚öôÔ∏è</div>
              </le-button>
              <le-button icon-only variant="outlined" color="secondary">
                <svg slot="icon-only" viewBox="0 0 24 24" fill="currentColor"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/></svg>
              </le-button>
              <le-button color="success">
                <svg slot="icon-start" viewBox="0 0 24 24" fill="currentColor" width="16" height="16"><path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"/></svg>
                <div>With Icon</div>
              </le-button>
              <le-button>
                <div>Next</div>
                <div slot="icon-end">‚Üí</div>
              </le-button>
            </div>
          </div>
        </div>
      </div>

      <div class="demo-section">
        <h2>Stack & Box Layout Components</h2>
        <p>Flexbox-based layout primitives for arranging content horizontally or vertically.</p>
        
        <div class="text-slot-demo" style="margin-bottom: var(--le-space-md);">
          <label>Horizontal Stack (default):</label>
          <le-stack gap="var(--le-space-md)" style="margin-top: 8px;">
            <le-box padding="var(--le-space-md)" background="var(--le-color-primary-light)" border-radius="var(--le-radius-md)">
              <le-button>Box 1 Button</le-button>
            </le-box>
            <le-box padding="var(--le-space-md)" background="var(--le-color-primary-light)" border-radius="var(--le-radius-md)">
              <span>Box 2</span>
            </le-box>
            <le-box padding="var(--le-space-md)" background="var(--le-color-primary-light)" border-radius="var(--le-radius-md)">
              <span>Box 3</span>
            </le-box>
          </le-stack>
        </div>
        
        <div class="text-slot-demo" style="margin-bottom: var(--le-space-md);">
          <label>Vertical Stack:</label>
          <le-stack direction="vertical" gap="var(--le-space-sm)" style="margin-top: 8px;">
            <le-box padding="var(--le-space-sm) var(--le-space-md)" background="var(--le-color-success-light)" border-radius="var(--le-radius-md)">
              <span>Item 1</span>
            </le-box>
            <le-box padding="var(--le-space-sm) var(--le-space-md)" background="var(--le-color-success-light)" border-radius="var(--le-radius-md)">
              <span>Item 2</span>
            </le-box>
            <le-box padding="var(--le-space-sm) var(--le-space-md)" background="var(--le-color-success-light)" border-radius="var(--le-radius-md)">
              <span>Item 3</span>
            </le-box>
          </le-stack>
        </div>
        
        <div class="text-slot-demo" style="margin-bottom: var(--le-space-md);">
          <label>Flex grow/shrink (middle box grows):</label>
          <le-stack gap="var(--le-space-md)" full-width style="margin-top: 8px;">
            <le-box padding="var(--le-space-md)" background="var(--le-color-warning-light)" border-radius="var(--le-radius-md)">
              <span>Fixed</span>
            </le-box>
            <le-box grow="1" padding="var(--le-space-md)" background="var(--le-color-warning-light)" border-radius="var(--le-radius-md)">
              <span>Grows to fill space</span>
            </le-box>
            <le-box padding="var(--le-space-md)" background="var(--le-color-warning-light)" border-radius="var(--le-radius-md)">
              <span>Fixed</span>
            </le-box>
          </le-stack>
        </div>
        
        <div class="text-slot-demo" style="margin-bottom: var(--le-space-md);">
          <label>Alignment & Justification:</label>
          <le-stack
            gap="var(--le-space-md)"
            justify="space-between"
            align="end"
            full-width
            padding="var(--le-space-md)"
            style="margin-top: 8px; background: var(--le-color-surface-alt); border-radius: var(--le-radius-lg);"
          >
            <le-box padding="var(--le-space-md)" height="60px" background="var(--le-color-info-light)" border-radius="var(--le-radius-md)">
              <span>Tall</span>
            </le-box>
            <le-box padding="var(--le-space-md)" height="40px" background="var(--le-color-info-light)" border-radius="var(--le-radius-md)">
              <span>Medium</span>
            </le-box>
            <le-box padding="var(--le-space-md)" height="80px" background="var(--le-color-info-light)" border-radius="var(--le-radius-md)">
              <span>Taller</span>
            </le-box>
          </le-stack>
        </div>
        
        <div class="text-slot-demo" style="margin-bottom: var(--le-space-md);">
          <label>Wrapping Stack:</label>
          <le-stack gap="var(--le-space-md)" wrap="true" style="margin-top: 8px;">
            <le-box basis="150px" padding="var(--le-space-md)" background="var(--le-color-danger-light)" border-radius="var(--le-radius-md)">
              <span>150px basis</span>
            </le-box>
            <le-box basis="150px" padding="var(--le-space-md)" background="var(--le-color-danger-light)" border-radius="var(--le-radius-md)">
              <span>150px basis</span>
            </le-box>
            <le-box basis="150px" padding="var(--le-space-md)" background="var(--le-color-danger-light)" border-radius="var(--le-radius-md)">
              <span>150px basis</span>
            </le-box>
            <le-box basis="150px" padding="var(--le-space-md)" background="var(--le-color-danger-light)" border-radius="var(--le-radius-md)">
              <span>150px basis</span>
            </le-box>
            <le-box basis="150px" padding="var(--le-space-md)" background="var(--le-color-danger-light)" border-radius="var(--le-radius-md)">
              <span>150px basis</span>
            </le-box>
          </le-stack>
        </div>
        
        <div class="text-slot-demo">
          <label>Nested Layout (Holy Grail):</label>
          <le-stack direction="vertical" gap="var(--le-space-md)" full-width style="margin-top: 8px; min-height: 200px;">
            <!-- Header -->
            <le-box padding="var(--le-space-md)" background="var(--le-color-primary)" border-radius="var(--le-radius-md)">
              <le-text variant="h4" color="var(--le-color-on-primary)">Header</le-text>
            </le-box>
            <!-- Main content area -->
            <le-stack gap="var(--le-space-md)" grow="1" full-width>
              <le-box basis="120px" padding="var(--le-space-md)" background="var(--le-color-surface-alt)" border-radius="var(--le-radius-md)">
                <le-text variant="label">Sidebar</le-text>
              </le-box>
              <le-box grow="1" padding="var(--le-space-md)" background="var(--le-color-surface)" border="1px solid var(--le-color-border)" border-radius="var(--le-radius-md)">
                <le-text variant="p">Main Content Area - edit this text in admin mode!</le-text>
              </le-box>
              <le-box basis="120px" padding="var(--le-space-md)" background="var(--le-color-surface-alt)" border-radius="var(--le-radius-md)">
                <le-text variant="label">Aside</le-text>
              </le-box>
            </le-stack>
            <!-- Footer -->
            <le-box padding="var(--le-space-md)" background="var(--le-color-primary)" border-radius="var(--le-radius-md)">
              <le-text variant="small" color="var(--le-color-on-primary)">Footer</le-text>
            </le-box>
          </le-stack>
        </div>
      </div>

    </template>

    <!-- 
      Note: In a real app, you'd import from the package:
      import { leAlert, leConfirm, lePrompt } from 'le-kit';
      
      For the dev server demo, we define equivalent helpers below.
    -->

    <script>
      // ============================================
      // Popup API helpers (equivalent to le-kit exports)
      // In production, import these from 'le-kit' package
      // ============================================
      
      async function leAlert(message, options = {}) {
        const popup = document.createElement('le-popup');
        popup.message = message;
        popup.type = 'alert';
        if (options.title) popup.popupTitle = options.title;
        if (options.position) popup.position = options.position;
        if (options.modal !== undefined) popup.modal = options.modal;
        if (options.confirmText) popup.confirmText = options.confirmText;
        document.body.appendChild(popup);
        await popup.show();
        popup.remove();
      }
      
      async function leConfirm(message, options = {}) {
        const popup = document.createElement('le-popup');
        popup.message = message;
        popup.type = 'confirm';
        if (options.title) popup.popupTitle = options.title;
        if (options.position) popup.position = options.position;
        if (options.modal !== undefined) popup.modal = options.modal;
        if (options.confirmText) popup.confirmText = options.confirmText;
        if (options.cancelText) popup.cancelText = options.cancelText;
        document.body.appendChild(popup);
        const result = await popup.show();
        popup.remove();
        return result.confirmed;
      }
      
      async function lePrompt(message, options = {}) {
        const popup = document.createElement('le-popup');
        popup.message = message;
        popup.type = 'prompt';
        if (options.title) popup.popupTitle = options.title;
        if (options.position) popup.position = options.position;
        if (options.modal !== undefined) popup.modal = options.modal;
        if (options.placeholder) popup.placeholder = options.placeholder;
        if (options.defaultValue) popup.defaultValue = options.defaultValue;
        if (options.confirmText) popup.confirmText = options.confirmText;
        if (options.cancelText) popup.cancelText = options.cancelText;
        document.body.appendChild(popup);
        const result = await popup.show();
        popup.remove();
        return result.confirmed ? (result.value ?? '') : null;
      }

      const STORAGE_KEY = 'le-kit-demo-content';
      const contentContainer = document.getElementById('editable-content');
      const defaultTemplate = document.getElementById('default-content');

      // Initialize content from localStorage or default template
      function initContent() {
        const savedContent = localStorage.getItem(STORAGE_KEY);
        if (savedContent) {
          contentContainer.innerHTML = savedContent;
          console.log('Loaded content from localStorage');
        } else {
          contentContainer.innerHTML = defaultTemplate.innerHTML;
          console.log('Using default content');
        }
      }

      // Save current content to localStorage
      function saveContent() {
        const html = contentContainer.innerHTML;
        localStorage.setItem(STORAGE_KEY, html);
        console.log('Content saved to localStorage');
      }

      // Reset content to default
      async function resetContent() {
        if (await leConfirm('Reset all content to default? This will discard all your changes.')) {
          localStorage.removeItem(STORAGE_KEY);
          contentContainer.innerHTML = defaultTemplate.innerHTML;
          console.log('Content reset to default');
        }
      }

      // Listen for changes from le-slot components
      contentContainer.addEventListener('leSlotChange', (event) => {
        const { name, value, isValid } = event.detail;
        
        // le-slot already updates the slotted element directly,
        // we just need to save the updated DOM to localStorage
        if (isValid) {
          saveContent();
        }
      });

      function setMode(mode, event) {
        console.log('Setting mode to:', mode, 'with event:', event);
        document.documentElement.setAttribute('mode', mode);
        
        // Update button states - toggle 'selected' attribute
        document.querySelectorAll('[id^="btn-mode-"]').forEach(btn => {
          if (btn.id === `btn-mode-${mode}`) {
            btn.setAttribute('selected', '');
          } else {
            btn.removeAttribute('selected');
          }
        });
        
        console.log('Mode changed to:', mode);
      }
      
      function setTheme(theme) {
        document.documentElement.setAttribute('theme', theme);
        
        // Update button states - toggle 'selected' attribute
        document.querySelectorAll('[id^="btn-theme-"]').forEach(btn => {
          if (btn.id === `btn-theme-${theme}`) {
            btn.setAttribute('selected', '');
          } else {
            btn.removeAttribute('selected');
          }
        });
        
        console.log('Theme changed to:', theme);
      }

      // ============================================
      // Popup Demo Functions
      // ============================================
      
      // Using the imported leAlert, leConfirm, lePrompt functions
      async function showAlert() {
        await leAlert('This is an alert message!', { title: 'Alert' });
        document.getElementById('popup-result').textContent = 'Alert closed';
      }
      
      async function showConfirm() {
        const confirmed = await leConfirm('Are you sure you want to proceed?', { 
          title: 'Confirm Action' 
        });
        document.getElementById('popup-result').textContent = `Confirmed: ${confirmed}`;
      }
      
      async function showPrompt() {
        const name = await lePrompt('What is your name?', { 
          title: 'Enter Name',
          placeholder: 'Type your name...'
        });
        if (name !== null) {
          document.getElementById('popup-result').textContent = `Hello, ${name || 'stranger'}!`;
        } else {
          document.getElementById('popup-result').textContent = 'Prompt cancelled';
        }
      }
      
      async function showPositioned(position) {
        await leAlert(`This popup is positioned at: ${position}`, {
          title: 'Position Demo',
          position: position
        });
      }
      
      async function showNonModal(options = {}) {
        await leAlert('This is a non-modal popup. You can still interact with the page behind it.', {
          title: 'Non-Modal',
          modal: false,
          ...options
        });
      }
      
      async function showCustomPopup() {
        const popup = document.getElementById('custom-popup');
        const result = await popup.show();
        document.getElementById('popup-result').textContent = 
          result.confirmed ? 'You clicked Awesome!' : 'You clicked Maybe Later';
      }

      // Initialize on page load
      initContent();
    </script>
  </body>
</html>
