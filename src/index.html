<!DOCTYPE html>
<html dir="ltr" lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=5.0" />
    <title>Le-Kit Component Library</title>

    <script type="module" src="/build/le-kit.esm.js"></script>
    <script nomodule src="/build/le-kit.js"></script>
    <link rel="stylesheet" href="/build/le-kit.css" />
    
    <style>
      body {
        font-family: var(--le-font-family);
        padding: var(--le-space-lg);
        background: var(--le-color-background);
        color: var(--le-color-text);
        margin: 0;
        transition: background 0.3s ease, color 0.3s ease;
      }
      .demo-section {
        margin-bottom: var(--le-space-2xl);
      }
      h1, h2 {
        color: var(--le-color-text);
      }
      p {
        color: var(--le-color-text-secondary);
      }
      .controls {
        margin-bottom: var(--le-space-lg);
        padding: var(--le-space-md);
        background: var(--le-color-surface);
        border-radius: var(--le-radius-lg);
        display: flex;
        flex-wrap: wrap;
        gap: var(--le-space-lg);
        align-items: center;
        box-shadow: var(--le-shadow-sm);
      }
      .control-group {
        display: flex;
        gap: var(--le-space-sm);
        align-items: center;
      }
      .control-group span {
        font-weight: var(--le-font-weight-medium);
        color: var(--le-color-text-secondary);
        font-size: var(--le-font-size-sm);
      }
      .controls button {
        padding: var(--le-space-sm) var(--le-space-md);
        border: 1px solid var(--le-color-border);
        border-radius: var(--le-radius-md);
        background: var(--le-color-surface);
        color: var(--le-color-text);
        cursor: pointer;
        font-size: var(--le-font-size-sm);
        transition: all var(--le-transition-fast);
      }
      .controls button:hover {
        border-color: var(--le-color-primary);
      }
      .controls button.active {
        background: var(--le-color-primary);
        color: var(--le-color-on-primary);
        border-color: var(--le-color-primary);
      }
      .controls button.danger {
        border-color: #e53935;
        color: #e53935;
      }
      .controls button.danger:hover {
        background: #e53935;
        color: white;
      }
      .demo-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
        gap: var(--le-space-lg);
      }
      .text-slot-demo {
        padding: var(--le-space-md);
        background: var(--le-color-surface);
        border-radius: var(--le-radius-md);
        box-shadow: var(--le-shadow-sm);
      }
      .text-slot-demo label {
        display: block;
        margin-bottom: var(--le-space-sm);
        font-weight: var(--le-font-weight-medium);
        color: var(--le-color-text-secondary);
        font-size: var(--le-font-size-sm);
      }
    </style>
  </head>
  <body>
    <h1>Le-Kit Component Library</h1>
    
    <div class="controls">
      <div class="control-group">
        <span>Mode:</span>
        <button id="btn-mode-default" class="active" onclick="setMode('default')">Default</button>
        <button id="btn-mode-admin" onclick="setMode('admin')">Admin</button>
      </div>
      
      <div class="control-group">
        <span>Theme:</span>
        <button id="btn-theme-default" class="active" onclick="setTheme('default')">Default</button>
        <button id="btn-theme-dark" onclick="setTheme('dark')">Dark</button>
        <button id="btn-theme-gradient" onclick="setTheme('gradient')">Gradient</button>
        <button id="btn-theme-minimal" onclick="setTheme('minimal')">Minimal</button>
        <button id="btn-theme-warm" onclick="setTheme('warm')">Warm</button>
      </div>

      <div class="control-group">
        <button class="danger" onclick="resetContent()">Reset to Default</button>
      </div>
    </div>

    <!-- Editable content container - contents stored in localStorage -->
    <div id="editable-content"></div>

    <!-- Default content template (used when localStorage is empty) -->
    <template id="default-content">
      <div class="demo-section">
        <h2>Popover Component</h2>
        <p>A reusable popover for floating content, settings panels, and menus.</p>
        <div class="demo-grid">
          <div class="text-slot-demo">
            <label>Default trigger (gear icon):</label>
            <le-popover popover-title="Settings">
              <p style="margin: 0;">This is the popover content.</p>
            </le-popover>
          </div>
          
          <div class="text-slot-demo">
            <label>Custom trigger:</label>
            <le-popover popover-title="Options" position="bottom" align="center">
              <button slot="trigger" style="padding: 8px 16px; cursor: pointer;">Click me</button>
              <div style="display: flex; flex-direction: column; gap: 8px;">
                <button style="padding: 8px; text-align: left; border: none; background: none; cursor: pointer;">Option 1</button>
                <button style="padding: 8px; text-align: left; border: none; background: none; cursor: pointer;">Option 2</button>
                <button style="padding: 8px; text-align: left; border: none; background: none; cursor: pointer;">Option 3</button>
              </div>
            </le-popover>
          </div>
          
          <div class="text-slot-demo" style="text-align: end;">
            <label>Auto-positioning:</label>
            <le-popover popover-title="Auto Position" position="auto">
              <span slot="trigger" style="padding: 4px 8px; background: #e3f2fd; border-radius: 4px; cursor: pointer;">Hover info ℹ️</span>
              <p style="margin: 0; font-size: 13px;">Position automatically adjusts based on available viewport space.</p>
            </le-popover>
          </div>
        </div>
      </div>

      <div class="demo-section">
        <h2>Card Component (switch to Admin mode to see settings)</h2>
        <p>Cards now have built-in admin mode support. Click the ⚙️ to edit properties.</p>
        <div class="demo-grid">
          <!-- Card with content -->
          <le-card variant="default">
            <h2 slot="header">Card Title</h2>
            <p>This is the main content of the card. It can contain any elements.</p>
            <button slot="footer">Action</button>
          </le-card>
          
          <!-- Empty card - slots visible in admin mode -->
          <le-card variant="outlined">
            <!-- Empty slots will show placeholders in admin mode -->
          </le-card>
          
          <!-- Elevated card -->
          <le-card variant="elevated" interactive>
            <h3 slot="header">Interactive Card</h3>
            <p>This card is clickable and has elevation.</p>
          </le-card>
        </div>
      </div>

      <div class="demo-section">
        <h2>Text Slot Types (switch to Admin mode to see)</h2>
        <p>Demonstrating le-slot with type="text" and type="textarea" for inline text editing.</p>
        <div class="demo-grid">
          <div class="text-slot-demo">
            <label>Single line text input:</label>
            <le-slot type="text" label="Title" name="title" placeholder="Enter a title...">Default title text</le-slot>
          </div>
          
          <div class="text-slot-demo">
            <label>Multi-line textarea:</label>
            <le-slot type="textarea" label="Description" name="description" placeholder="Enter a description...">This is some default description text that spans multiple lines.</le-slot>
          </div>
          
          <div class="text-slot-demo">
            <label>Required text field:</label>
            <le-slot type="text" label="Email" name="email" required placeholder="Enter email address..."></le-slot>
          </div>
        </div>
      </div>
      
      <div class="demo-section">
        <h2>Mixed Themes (theme attribute on individual components)</h2>
        <p>Each card below has a different theme, demonstrating per-component theming.</p>
        <div class="demo-grid">
          <le-card variant="elevated" theme="dark">
            <h3 slot="header">Dark Theme Card</h3>
            <p>This card uses theme="dark" regardless of the global theme.</p>
          </le-card>
          
          <le-card variant="elevated" theme="gradient">
            <h3 slot="header">Gradient Theme Card</h3>
            <p>This card uses theme="gradient" with purple accents.</p>
          </le-card>
          
          <le-card variant="elevated" theme="warm">
            <h3 slot="header">Warm Theme Card</h3>
            <p>This card uses theme="warm" with orange tones.</p>
          </le-card>
        </div>
      </div>
    </template>

    <script>
      const STORAGE_KEY = 'le-kit-demo-content';
      const contentContainer = document.getElementById('editable-content');
      const defaultTemplate = document.getElementById('default-content');

      // Initialize content from localStorage or default template
      function initContent() {
        const savedContent = localStorage.getItem(STORAGE_KEY);
        if (savedContent) {
          contentContainer.innerHTML = savedContent;
          console.log('Loaded content from localStorage');
        } else {
          contentContainer.innerHTML = defaultTemplate.innerHTML;
          console.log('Using default content');
        }
      }

      // Save current content to localStorage
      function saveContent() {
        const html = contentContainer.innerHTML;
        localStorage.setItem(STORAGE_KEY, html);
        console.log('Content saved to localStorage');
      }

      // Reset content to default
      function resetContent() {
        if (confirm('Reset all content to default? This will discard all your changes.')) {
          localStorage.removeItem(STORAGE_KEY);
          contentContainer.innerHTML = defaultTemplate.innerHTML;
          console.log('Content reset to default');
        }
      }

      // Listen for changes from le-slot components
      contentContainer.addEventListener('leSlotChange', (event) => {
        const { name, value, isValid } = event.detail;
        
        // le-slot already updates the slotted element directly,
        // we just need to save the updated DOM to localStorage
        if (isValid) {
          saveContent();
        }
      });

      function setMode(mode) {
        document.documentElement.setAttribute('mode', mode);
        
        // Update button states
        document.querySelectorAll('[id^="btn-mode-"]').forEach(btn => {
          btn.classList.toggle('active', btn.id === `btn-mode-${mode}`);
        });
        
        console.log('Mode changed to:', mode);
      }
      
      function setTheme(theme) {
        document.documentElement.setAttribute('theme', theme);
        
        // Update button states
        document.querySelectorAll('[id^="btn-theme-"]').forEach(btn => {
          btn.classList.toggle('active', btn.id === `btn-theme-${theme}`);
        });
        
        console.log('Theme changed to:', theme);
      }

      // Initialize on page load
      initContent();
    </script>
  </body>
</html>
